<html lang="en">
<head>
    <title>sec-fetch-* sample</title>
    <link href="/style.css" rel="stylesheet"/>
</head>
<body>
<a class="navigation" href="framing.html">Back</a>
<hr/>
<table style="width: 80%; height: 50%; border-spacing: 1px">
    <tr>
        <td style="width: 40%">
            <button onclick="loadXHR()">load with XHR</button>
        </td>
        <td>
            <div id="xhr-fetch"></div>
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="loadIframe()">load in iFrame</button>
        </td>
        <td>
            <div id="iframe-fetch"></div>
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="loadImg()">load <code>img</code> tag</button>
        </td>
        <td>
            <div id="img-fetch"></div>
        </td>
    </tr>
</table>

<script>
    function loadXHR() {
        //const {origin} = window.location;
        fetch(`/.netlify/functions/sec-fetch`, {headers: {'accept': 'text/html'}})
            .then((response) => response.text())
            .then((data) => document.getElementById('xhr-fetch').innerHTML = data);
    }

    function loadIframe() {
        document.getElementById('iframe-fetch').innerHTML = "<iframe src='/.netlify/functions/sec-fetch' title='iFrame fetch'></iframe>"
    }

    function loadImg() {
        document.getElementById('img-fetch').innerHTML = `<img alt="sec-fetch-site" src="/.netlify/functions/sec-fetch"/>`;
    }
</script>

</body>
</html>
