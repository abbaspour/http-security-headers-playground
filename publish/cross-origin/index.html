<html lang="en">
<head>
    <title>ACA sample</title>
    <link href="/style.css" rel="stylesheet"/>
</head>
<body>
<a class="navigation" href="../">Back</a>
<hr/>
<table style="width: 80%">
    <tr style="height: 200px; alignment: top">
        <td style="height: 100%">
            <div id="www"></div>
        </td>
        <td >
            <div id="fake"></div>
        </td>
    </tr>
    <tr style="text-align: center">
        <td>
            Calling <a id="api-link">API</a> from allowed origin
        </td>
        <td>
            Calling API from <a id="fake-link">fake</a> origin
        </td>
    </tr>
</table>
<script>
    const {origin} = window.location
    const api = origin.replace(/:\/\/www\./, '://api.');
    const fake = origin.replace(/:\/\/www\./, '://fake.');
    document.getElementById('api-link').href = `${api}/.netlify/functions/aca-origin-restricted`;
    document.getElementById('fake-link').href = `${fake}/.netlify/functions/aca-origin-restricted`;

    document.getElementById('www').innerHTML = `<iframe src="frame.html" style="width: 100%; height: 100%"></iframe>`;
    document.getElementById('fake').innerHTML = `<iframe src="${fake}/cross-origin/frame.html" style="width: 100%"></iframe>`;
</script>
</body>
</html>
